.main-title
  = t("dict.sub-title")
.title 
  = t("dict.content")

.container
  - if logged_in?
    = link_to "早速始める", "#start", class:"btn btn-outline-primary mt-2 mb-1"
  
  - else
    .button
      = link_to auth_at_provider_path(provider: :github) , class: "btn btn-outline-success button-form my-3" do
            i.fab.fa-github.mr-2
            = "Sign in with Github"
    .button
      = link_to "すぐに始める", "#start", class:"btn btn-outline-primary button-form mb-3"
  
    .sub-title
      = "※ログインすると結果が記録、チャート、偏差値に反映されます"
    
.swiper.mb-3
  .swiper-wrapper
    = render @categories
  .swiper-pagination.swiper-pagination-black
  .swiper-button-prev.swiper-custom-button
    i.fa.fa-angle-left  
  .swiper-button-next.swiper-custom-button
    i.fa.fa-angle-right

.space
  div
    canvas#myChart
    #start
  .title
    = t("dict.select_category")
    = render "tab_menu"
    = render "tab_content"
  = link_to "ページトップに戻る", "#top", class:"btn btn-outline-primary btn-sm my-3 ms-1"
  
- if logged_in?
  javascript:
    var ctx = document.getElementById("myChart").getContext("2d");
    var myChart = new Chart(ctx, {
      //グラフの種類
      type: 'radar',
      //データの設定
      data: {
          labels: ["文字列", "数値", "配列", "ハッシュ", "総合","応用", "正規表現"],
          datasets: [
              {
                  label: "あなたの平均点",
                  //背景色
                  backgroundColor: "rgba(0, 255, 0, 0.3)",
                  //枠線の色
                  borderColor: "rgb(0, 154, 0, 1)",
                  //結合点の背景色
                  pointBackgroundColor: "rgb(0, 154, 0,  1)",
                  //結合点の枠線の色
                  pointBorderColor: "#fff",
                  //結合点の背景色（ホバーしたとき）
                  pointHoverBackgroundColor: "#fff",
                  //結合点の枠線の色（ホバーしたとき）
                  pointHoverBorderColor: "rgb(0, 154, 0, 1)",
                  //結合点より外でマウスホバーを認識する範囲（ピクセル単位）
                  hitRadius:10,
                  //グラフのデータ
                  data: [
                    #{current_user.decorate.average_score(1)},
                    #{current_user.decorate.average_score(2)},
                    #{current_user.decorate.average_score(3)},
                    #{current_user.decorate.average_score(4)},
                    #{current_user.decorate.average_score(5)},
                    #{current_user.decorate.average_score(6)},
                    #{current_user.decorate.average_score(7)},
                    ],
              },
              {
                //凡例のラベル
                  label: "みんなの平均点",
                  //背景色
                  backgroundColor: "rgba(255,255,0,0.5)",
                  //枠線の色
                  borderColor: "rgba(255,216,0,1)",
                  //結合点の背景色
                  pointBackgroundColor: "rgba(255,216,0,1)",
                  //結合点の枠線の色
                  pointBorderColor: "#fff",
                  //結合点の背景色（ホバーしたとき）
                  pointHoverBackgroundColor: "#fff",
                  //結合点の枠線の色（ホバーしたとき）
                  pointHoverBorderColor: "rgba(255,216,0,1)",
                  //結合点より外でマウスホバーを認識する範囲（ピクセル単位）
                  hitRadius: 10,
                  //グラフのデータ
                  data: [
                    #{all_user_average_score(1)},
                    #{all_user_average_score(2)},
                    #{all_user_average_score(3)},
                    #{all_user_average_score(4)},
                    #{all_user_average_score(5)},
                    #{all_user_average_score(6)},
                    #{all_user_average_score(7)},
                  ]
              }
          ]
      },
    options: {
        // レスポンシブ指定
        ticks:{
          stepSize:100
        }
      }
    });
- else 
  javascript:
    var ctx = document.getElementById("myChart").getContext("2d");
    var myChart = new Chart(ctx, {
      //グラフの種類
      type: 'radar',
      //データの設定
      data: {
          //データ項目のラベル
          labels: ["文字列", "数値", "配列", "ハッシュ", "総合","応用", "正規表現"],
          //データセット
          datasets:[
                {
                //凡例のラベル
                  label: "みんなの平均点",
                  //背景色
                  backgroundColor: "rgba(255,255,0,0.5)",
                  //枠線の色
                  borderColor: "rgba(255,216,0,1)",
                  //結合点の背景色
                  pointBackgroundColor: "rgba(255,216,0,1)",
                  //結合点の枠線の色
                  pointBorderColor: "#fff",
                  //結合点の背景色（ホバーしたとき）
                  pointHoverBackgroundColor: "#fff",
                  //結合点の枠線の色（ホバーしたとき）
                  pointHoverBorderColor: "rgba(255,216,0,1)",
                  //結合点より外でマウスホバーを認識する範囲（ピクセル単位）
                  hitRadius: 10,
                  //グラフのデータ
                  data: [
                    #{all_user_average_score(1)},
                    #{all_user_average_score(2)},
                    #{all_user_average_score(3)},
                    #{all_user_average_score(4)},
                    #{all_user_average_score(5)},
                    #{all_user_average_score(6)},
                    #{all_user_average_score(7)},
                  ]
              }
          ]
      },
    options: {
        // レスポンシブ指定
        ticks:{
          stepSize:100
        }
      }
    });